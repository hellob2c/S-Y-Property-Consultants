<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enquiry — S&Y Property Consultants</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  
<header class="bg-white border-b">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <a href="index.html" class="text-xl font-semibold">S&Y Property Consultants</a>
    <nav class="flex gap-5 text-sm">
      <a class="hover:underline" href="index.html">Home</a>
      <a class="hover:underline" href="services.html">Services</a>
      <a class="hover:underline" href="enquiry.html">Enquiry</a>
      <a class="hover:underline" href="contact.html">Contact</a>
    </nav>
  </div>
</header>

  <main class="max-w-3xl mx-auto px-4 py-10">
    <section class="bg-white rounded-2xl shadow-sm p-8">
      <h1 class="text-3xl font-semibold">Enquiry & Document Upload</h1>
      <p class="mt-3 text-slate-600">Share your requirement and upload documents (optional). We will contact you with the right guidance.</p>

      <form id="enquiryForm" class="mt-8 space-y-5" enctype="multipart/form-data" novalidate>
        <div class="hidden">
          <label class="text-sm font-medium">Company Website</label>
          <input type="text" name="company_website" autocomplete="off" />
        </div>

        <div class="grid sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-medium">Full Name *</label>
            <input name="full_name" class="mt-1 w-full rounded-xl border px-3 py-2" required />
            <p class="mt-1 text-xs text-red-600 hidden" data-err="full_name">Please enter your name.</p>
          </div>
          <div>
            <label class="text-sm font-medium">Phone *</label>
            <input name="phone" class="mt-1 w-full rounded-xl border px-3 py-2" inputmode="tel" required />
            <p class="mt-1 text-xs text-red-600 hidden" data-err="phone">Please enter a valid phone number.</p>
          </div>
        </div>

        <div class="grid sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-medium">Email (optional)</label>
            <input name="email" class="mt-1 w-full rounded-xl border px-3 py-2" inputmode="email" />
            <p class="mt-1 text-xs text-red-600 hidden" data-err="email">Please enter a valid email.</p>
          </div>
          <div>
            <label class="text-sm font-medium">Service *</label>
            <select name="service" class="mt-1 w-full rounded-xl border px-3 py-2" required>
              <option value="">Select</option>
              <option>Buy Property</option>
              <option>Sell Property</option>
              <option>Rent / Lease</option>
              <option>Documentation</option>
              <option>Legal Consultation</option>
              <option>Other</option>
            </select>
            <p class="mt-1 text-xs text-red-600 hidden" data-err="service">Please select a service.</p>
          </div>
        </div>

        <div>
          <label class="text-sm font-medium">Preferred Callback Time (optional)</label>
          <select name="callback_time" class="mt-1 w-full rounded-xl border px-3 py-2">
            <option value="">Select</option>
            <option>Morning</option>
            <option>Afternoon</option>
            <option>Evening</option>
          </select>
        </div>

        <div>
          <label class="text-sm font-medium">Your Requirement *</label>
          <textarea name="message" rows="5" class="mt-1 w-full rounded-xl border px-3 py-2" required></textarea>
          <p class="mt-1 text-xs text-red-600 hidden" data-err="message">Please describe your requirement.</p>
        </div>

        <div>
          <label class="text-sm font-medium">Upload Documents (optional)</label>
          <input name="documents[]" type="file" multiple class="mt-1 w-full rounded-xl border bg-white px-3 py-2"
            accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" />
          <p class="mt-2 text-xs text-slate-600">Allowed: PDF, JPG, PNG, DOC, DOCX. Max 10MB per file.</p>
          <p class="mt-1 text-xs text-red-600 hidden" data-err="documents">One or more files are invalid (type/size).</p>
        </div>

        <div class="flex items-center gap-3">
          <button id="submitBtn" type="submit" class="px-5 py-3 rounded-xl bg-slate-900 text-white text-sm">Submit Enquiry</button>
          <div id="loading" class="text-sm text-slate-600 hidden">Submitting…</div>
        </div>

        <div id="result" class="hidden rounded-xl p-4 text-sm"></div>
      </form>
    </section>
  </main>
  
<footer class="border-t mt-12">
  <div class="max-w-6xl mx-auto px-4 py-8 text-sm text-slate-600 flex flex-col gap-2">
    <div>© 2026 S&Y Property Consultants. All Rights Reserved.</div>
    <div class="text-slate-500">DSS-6, HUDA Market, Sector 10, Gurugram</div>
  </div>
</footer>


<script>
(function() {
  const form = document.getElementById('enquiryForm');
  const btn = document.getElementById('submitBtn');
  const loading = document.getElementById('loading');
  const result = document.getElementById('result');

  function showError(name, show) {
    const el = document.querySelector(`[data-err="${name}"]`);
    if (!el) return;
    el.classList.toggle('hidden', !show);
  }

  function isValidEmail(email) {
    if (!email) return true;
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  function isValidPhone(phone) {
    const p = (phone || '').replace(/\D/g,'');
    return p.length >= 10 && p.length <= 13;
  }

  function validateFiles(fileList) {
    if (!fileList || fileList.length === 0) return true;
    const allowed = ['pdf','jpg','jpeg','png','doc','docx'];
    const maxBytes = 10 * 1024 * 1024;
    for (const file of fileList) {
      const ext = (file.name.split('.').pop() || '').toLowerCase();
      if (!allowed.includes(ext)) return false;
      if (file.size > maxBytes) return false;
    }
    return true;
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    ['full_name','phone','email','service','message','documents'].forEach(k => showError(k,false));
    result.classList.add('hidden');

    const fd = new FormData(form);
    const name = (fd.get('full_name') || '').trim();
    const phone = (fd.get('phone') || '').trim();
    const email = (fd.get('email') || '').trim();
    const service = (fd.get('service') || '').trim();
    const message = (fd.get('message') || '').trim();

    let ok = true;
    if (!name) { showError('full_name', true); ok=false; }
    if (!isValidPhone(phone)) { showError('phone', true); ok=false; }
    if (!isValidEmail(email)) { showError('email', true); ok=false; }
    if (!service) { showError('service', true); ok=false; }
    if (!message) { showError('message', true); ok=false; }

    const fileInput = form.querySelector('input[type="file"]');
    if (fileInput && !validateFiles(fileInput.files)) { showError('documents', true); ok=false; }

    if (!ok) return;

    btn.disabled = true;
    loading.classList.remove('hidden');

    try {
      const res = await fetch('api/submit-enquiry.php', { method: 'POST', body: fd });
      const data = await res.json();
      result.classList.remove('hidden');
      if (data.success) {
        result.className = 'rounded-xl p-4 text-sm bg-emerald-50 text-emerald-800 border border-emerald-200';
        result.textContent = data.message || 'Enquiry submitted successfully.';
        form.reset();
      } else {
        result.className = 'rounded-xl p-4 text-sm bg-rose-50 text-rose-800 border border-rose-200';
        result.textContent = data.message || 'Something went wrong. Please try again.';
      }
    } catch (err) {
      result.classList.remove('hidden');
      result.className = 'rounded-xl p-4 text-sm bg-rose-50 text-rose-800 border border-rose-200';
      result.textContent = 'Network/server error. Please try again.';
    } finally {
      btn.disabled = false;
      loading.classList.add('hidden');
    }
  });
})();
</script>
</body>
</html>
